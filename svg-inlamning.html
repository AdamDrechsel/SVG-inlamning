<!DOCTYPE html>
<html lang="sv">
<head>
	<meta charset="utf-8" />
	<title>SVG-inlämning</title>
<style>
	polygon{
		fill: rgb(200, 0, 0);
		stroke: #444;
		stroke-width: 1;
	}
	svg {
		border: 2px solid black;
		background-color: red;
	}
	#mittlinje{
		stroke: #444;
		stroke-width: 1;
		color: black;
	}

	
</style>
</head>
<body>
<svg width="1330" height="600" id="plan">
	
		<defs>
		<polygon id="star" points=" -50,0 -10,-10 0,-50 10,-10 50,0 10,10 0,50 -10,10" />

	</defs>
	<use xlink:href="#star" x="650" y="300" />
	// bas-stjärna	
	<use xlink:href="#star" x="700" y="350"/>
	<use xlink:href="#star" x="600" y="350"/>
	<use xlink:href="#star" x="750" y="400"/>
	<use xlink:href="#star" x="800" y="450"/>
	<use xlink:href="#star" x="700" y="450"/>
	<use xlink:href="#star" x="650" y="400"/>
	<use xlink:href="#star" x="750" y="300"/>
	<use xlink:href="#star" x="550" y="300"/>
	<use xlink:href="#star" x="450" y="300"/>
	<use xlink:href="#star" x="350" y="300"/>
	<use xlink:href="#star" x="250" y="300"/>
	<use xlink:href="#star" x="150" y="300"/>
	<use xlink:href="#star" x="50"  y="300"/>
	<use xlink:href="#star" x="850"  y="300"/>
	<use xlink:href="#star" x="950"  y="300"/>
	<use xlink:href="#star" x="1050"  y="300"/>
	<use xlink:href="#star" x="1150"  y="300"/>
	<use xlink:href="#star" x="1250"  y="300"/>
	<use xlink:href="#star" x="1350"  y="300"/>
	<use xlink:href="#star" x="900"  y="350"/>
	<use xlink:href="#star" x="900"  y="250"/>
	<use xlink:href="#star" x="800"  y="350"/>
	<use xlink:href="#star" x="1000"  y="350"/>
	<use xlink:href="#star" x="1100"  y="350"/>
	<use xlink:href="#star" x="1200"  y="350"/>
	<use xlink:href="#star" x="1300"  y="350"/>
	<use xlink:href="#star" x="1400"  y="350"/>
	<use xlink:href="#star" x="400"  y="350"/>
	<use xlink:href="#star" x="500"  y="350"/>
	<use xlink:href="#star" x="300"  y="350"/>
	<use xlink:href="#star" x="200"  y="350"/>
	<use xlink:href="#star" x="100"  y="350"/>
	<use xlink:href="#star" x="0"  y="350"/>
	<use xlink:href="#star" x="500"  y="450"/>
	<use xlink:href="#star" x="400"  y="450"/>
	<use xlink:href="#star" x="300"  y="450"/>
	<use xlink:href="#star" x="200"  y="450"/>
	<use xlink:href="#star" x="100"  y="450"/>
	<use xlink:href="#star" x="0"  y="450"/>
	<use xlink:href="#star" x="600"  y="450"/>
	<use xlink:href="#star" x="900"  y="450"/>
	<use xlink:href="#star" x="1000"  y="450"/>
	<use xlink:href="#star" x="1100"  y="450"/>
	<use xlink:href="#star" x="1200"  y="450"/>
	<use xlink:href="#star" x="1300"  y="450"/>
	<use xlink:href="#star" x="1400"  y="450"/>
	<use xlink:href="#star" x="550"  y="400"/>
	<use xlink:href="#star" x="650"  y="400"/>
	<use xlink:href="#star" x="750"  y="400"/>
	<use xlink:href="#star" x="850"  y="400"/>
	<use xlink:href="#star" x="950"  y="400"/>
	<use xlink:href="#star" x="1050"  y="400"/>
	<use xlink:href="#star" x="1150"  y="400"/>
	<use xlink:href="#star" x="1250"  y="400"/>
	<use xlink:href="#star" x="1350"  y="400"/>
	<use xlink:href="#star" x="450"  y="400"/>
	<use xlink:href="#star" x="350"  y="400"/>
	<use xlink:href="#star" x="250"  y="400"/>
	<use xlink:href="#star" x="150"  y="400"/>
	<use xlink:href="#star" x="50"  y="400"/>
	<use xlink:href="#star" x="600"  y="250"/>
	<use xlink:href="#star" x="700"  y="250"/>
	<use xlink:href="#star" x="800"  y="250"/>
	<use xlink:href="#star" x="900"  y="250"/>
	<use xlink:href="#star" x="1000"  y="250"/>
	<use xlink:href="#star" x="1100"  y="250"/>
	<use xlink:href="#star" x="1200"  y="250"/>
	<use xlink:href="#star" x="1300"  y="250"/>
	<use xlink:href="#star" x="1400"  y="250"/>
	<use xlink:href="#star" x="500"  y="250"/>
	<use xlink:href="#star" x="400"  y="250"/>
	<use xlink:href="#star" x="300"  y="250"/>
	<use xlink:href="#star" x="200"  y="250"/>
	<use xlink:href="#star" x="100"  y="250"/>
	<use xlink:href="#star" x="0"  y="250"/>
	<use xlink:href="#star" x="50"  y="200"/>
	<use xlink:href="#star" x="150"  y="200"/>
	<use xlink:href="#star" x="250"  y="200"/>
	<use xlink:href="#star" x="350"  y="200"/>
	<use xlink:href="#star" x="450"  y="200"/>
	<use xlink:href="#star" x="550"  y="200"/>
	<use xlink:href="#star" x="650"  y="200"/>
	<use xlink:href="#star" x="750"  y="200"/>
	<use xlink:href="#star" x="850"  y="200"/>
	<use xlink:href="#star" x="950"  y="200"/>
	<use xlink:href="#star" x="1050"  y="200"/>
	<use xlink:href="#star" x="1150"  y="200"/>
	<use xlink:href="#star" x="1250"  y="200"/>
	<use xlink:href="#star" x="1350"  y="200"/>
	<use xlink:href="#star" x="0"  y="150"/>
	<use xlink:href="#star" x="100"  y="150"/>
	<use xlink:href="#star" x="200"  y="150"/>
	<use xlink:href="#star" x="300"  y="150"/>
	<use xlink:href="#star" x="400"  y="150"/>
	<use xlink:href="#star" x="500"  y="150"/>
	<use xlink:href="#star" x="600"  y="150"/>
	<use xlink:href="#star" x="700"  y="150"/>
	<use xlink:href="#star" x="800"  y="150"/>
	<use xlink:href="#star" x="900"  y="150"/>
	<use xlink:href="#star" x="1000"  y="150"/>
	<use xlink:href="#star" x="1100"  y="150"/>
	<use xlink:href="#star" x="1200"  y="150"/>
	<use xlink:href="#star" x="1300"  y="150"/>
	<use xlink:href="#star" x="1400"  y="150"/>
	<use xlink:href="#star" x="50"  y="100"/>
	<use xlink:href="#star" x="150"  y="100"/>
	<use xlink:href="#star" x="250"  y="100"/>
	<use xlink:href="#star" x="350"  y="100"/>
	<use xlink:href="#star" x="450"  y="100"/>
	<use xlink:href="#star" x="550"  y="100"/>
	<use xlink:href="#star" x="650"  y="100"/>
	<use xlink:href="#star" x="750"  y="100"/>
	<use xlink:href="#star" x="850"  y="100"/>
	<use xlink:href="#star" x="950"  y="100"/>
	<use xlink:href="#star" x="1050"  y="100"/>
	<use xlink:href="#star" x="1150"  y="100"/>
	<use xlink:href="#star" x="1250"  y="100"/>
	<use xlink:href="#star" x="1350"  y="100"/>
	<use xlink:href="#star" x="0"  y="50"/>
	<use xlink:href="#star" x="100"  y="50"/>
	<use xlink:href="#star" x="200"  y="50"/>
	<use xlink:href="#star" x="300"  y="50"/>
	<use xlink:href="#star" x="400"  y="50"/>
	<use xlink:href="#star" x="500"  y="50"/>
	<use xlink:href="#star" x="600"  y="50"/>
	<use xlink:href="#star" x="700"  y="50"/>
	<use xlink:href="#star" x="800"  y="50"/>
	<use xlink:href="#star" x="900"  y="50"/>
	<use xlink:href="#star" x="1000"  y="50"/>
	<use xlink:href="#star" x="1100"  y="50"/>
	<use xlink:href="#star" x="1200"  y="50"/>
	<use xlink:href="#star" x="1300"  y="50"/>
	<use xlink:href="#star" x="1400"  y="50"/>
	<use xlink:href="#star" x="50"  y="500"/>
	<use xlink:href="#star" x="150"  y="500"/>
	<use xlink:href="#star" x="250"  y="500"/>
	<use xlink:href="#star" x="350"  y="500"/>
	<use xlink:href="#star" x="450"  y="500"/>
	<use xlink:href="#star" x="550"  y="500"/>
	<use xlink:href="#star" x="650"  y="500"/>
	<use xlink:href="#star" x="750"  y="500"/>
	<use xlink:href="#star" x="850"  y="500"/>
	<use xlink:href="#star" x="950"  y="500"/>
	<use xlink:href="#star" x="1050"  y="500"/>
	<use xlink:href="#star" x="1150"  y="500"/>
	<use xlink:href="#star" x="1250"  y="500"/>
	<use xlink:href="#star" x="1350"  y="500"/>
	<use xlink:href="#star" x="0"  y="550"/>
	<use xlink:href="#star" x="100"  y="550"/>
	<use xlink:href="#star" x="200"  y="550"/>
	<use xlink:href="#star" x="300"  y="550"/>
	<use xlink:href="#star" x="400"  y="550"/>
	<use xlink:href="#star" x="500"  y="550"/>
	<use xlink:href="#star" x="600"  y="550"/>
	<use xlink:href="#star" x="700"  y="550"/>
	<use xlink:href="#star" x="800"  y="550"/>
	<use xlink:href="#star" x="900"  y="550"/>
	<use xlink:href="#star" x="1000"  y="550"/>
	<use xlink:href="#star" x="1100"  y="550"/>
	<use xlink:href="#star" x="1200"  y="550"/>
	<use xlink:href="#star" x="1300"  y="550"/>
	<use xlink:href="#star" x="1400"  y="550"/>
	
		<rect x="10" y="20" width="40" height="150" id="rect2"/>
	<rect x="1280" y="20" width="40" height="150" id="rect1" />
	<circle cx="600" cy="300" r="20" stroke="black" stroke-width="2" id="bollen" />
	<line y1="0" x1="650" y2="600" x2="650" id="mittlinje" />
	// Paddel 1 & 2 + Plan + Boll + Mittlinje


</svg>
<script>
var rpad = document.getElementById("rect1");
var rpad_y = rpad.getAttribute("y");
var rpad_speed = 0;

var lpad = document.getElementById("rect2");
var lpad_y = lpad.getAttribute("y");
var lpad_speed = 0;

var fired = false;

window.onkeydown = function (e) {
    if (fired) {
        return false;
    }
    switch(e.keyCode) {
    case 38:
        if (rpad_y >= 15){
            rpad_speed = -15
            // rpad_y -= 20;
            // rpad.setAttribute("y", rpad_y);
        }
        break;

    case 40:
        if (rpad_y <= 430) {
            rpad_speed = 15;
            // rpad_y = +rpad_y +20;
            // rpad.setAttribute("y", rpad_y);
        }
        break;

    case 65:
        if (lpad_y >= 15){
			lpad_speed = -15;
           // lpad_y -= 20;
           // lpad.setAttribute("y", lpad_y);
        }
        break;

    case 90:
        if (lpad_y <= 430){
			lpad_speed = 15;
           // lpad_y = +lpad_y + 20;
           // lpad.setAttribute("y", lpad_y);
        }
        break;
    }
    fired = true;
    return false;
}

window.onkeyup = function () {
    fired = false;
    rpad_speed = 0;
    lpad_speed = 0;
}
var totspeed = 10;
var startvinkel = Math.random() * 0.5 * Math.PI - Math.PI * 0.25;

var boll = {
    x : 600,
    y : 300,
    xspeed : Math.cos(startvinkel) * totspeed,
    yspeed : Math.sin(startvinkel) * totspeed,
    bollen : document.getElementById("bollen")
};
boll.r = boll.bollen.getAttribute("r");

function moveball() {
    // Flytta paddlar först
	lpad_y = +lpad_y + (+lpad_speed);
	lpad_y = (lpad_y < 15) ? 15 : lpad_y;
	lpad_y = (lpad_y > 430) ? 430 : lpad_y;
	lpad.setAttribute("y", lpad_y);
	
    rpad_y = +rpad_y + (+rpad_speed);
    rpad_y = (rpad_y < 15) ? 15 : rpad_y;
	rpad_y = (rpad_y > 430) ? 430 : rpad_y;
    rpad.setAttribute("y", rpad_y);
 

    if ( boll.y < 20 ) {
        boll.yspeed = Math.abs(boll.yspeed);
    }
    // studs uppe
    else if (boll.y > 580) {
        boll.yspeed = -Math.abs(boll.yspeed);
    }
    // studs nere
    if (boll.x < 70) {
        // Träffar den paddeln?
        if ( boll.y >= lpad_y - boll.r && boll.y <= +lpad_y + 150 + +boll.r ) {
            console.log("träff vänster" + boll.y + " - " + lpad_y);
            // Träff-vänster
            // Paddelns mitt lpad_y + 75
            var vinkel = (boll.y - lpad_y - 75) * Math.PI /260;
            boll.xspeed = Math.cos(vinkel) * totspeed;
            boll.yspeed = Math.sin(vinkel) * totspeed;
        }
        if ( boll.x < 0 ) {
            return false;
        }
    }
        if (boll.x > 1260) {
        // träffar den höger-paddeln?
            if ( boll.y >= rpad_y - boll.r && boll.y <= +rpad_y + 150 + +boll.r ) {
                var vinkel = (boll.y - rpad_y - 75) * Math.PI /260;
                boll.xspeed = -Math.cos(vinkel) * totspeed;
                boll.yspeed = Math.sin(vinkel) * totspeed;
                // träff-höger
            }
        if (boll.x > 1330) {
            return false;
            // miss- höger
        }
        }
    boll.x += boll.xspeed;
    boll.y += boll.yspeed;
    boll.bollen.setAttribute("cx", boll.x);
    boll.bollen.setAttribute("cy", boll.y);
    window.setTimeout(moveball, 30);
}
moveball();
</script>
</body>
</html>